{% load static %}

<!DOCTYPE html>
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>

    <link rel="stylesheet" type="text/css" href="{% static 'game/style.css' %}" />

    <title>Tic Tac Toe!</title>
</head>
<body>

<div id="board">
    <div id="box1"></div>
    <div id="box2"></div>
    <div id="box3"></div>
    <div id="box4"></div>
    <div id="box5"></div>
    <div id="box6"></div>
    <div id="box7"></div>
    <div id="box8"></div>
    <div id="box9"></div>
</div>

game
<button id="test-ajax">Text Ajax</button>


<script type="text/javascript">

var canClick = true;

function updateBoard(data) {
    for (var key in data) {

        alert(key + "+" +  data[key]);
        var val = data[key];

        if(key.substr(0, 3) == "box")
        {
            $("#" + key).empty();
            if(val == 'X')
                $("#" + key).prepend('<img src="{% static 'game/images/X.jpg' %}" />');
            else if(val == 'O')
                $("#" + key).prepend('<img src="{% static 'game/images/O.jpg' %}" />');
        }


    }
}

$(document).ready(function() {


    updateBoard({{ context|safe }});

    $("#board div").click(function() {
        var box = this;

        if(canClick) {
            canClick = false;
            var url = "{% url 'ajax_make_move' box_choice=12345 %}".replace(/12345/,  $(box).attr('id').substring(3,4));
            $.getJSON(url, function( data ) {
                updateBoard(data);
                canClick = true;
            });
        }
    });



});


</script>

</body>
</html>